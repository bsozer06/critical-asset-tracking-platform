<div class="telemetry-panel">
  <mat-form-field appearance="outline" class="filter-field">
    <mat-label>Search Assets</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Type to filter...">
  </mat-form-field>
  <cdk-virtual-scroll-viewport itemSize="48" class="table-viewport">
    <table mat-table [dataSource]="filteredAssets" class="mat-elevation-z8">
      <!-- ID Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let asset"> {{asset.id}} </td>
      </ng-container>
      <!-- Location Column -->
      <ng-container matColumnDef="location">
        <th mat-header-cell *matHeaderCellDef> Location </th>
        <td mat-cell *matCellDef="let asset"> {{asset.location}} </td>
      </ng-container>
      <!-- Speed Column -->
      <ng-container matColumnDef="speed">
        <th mat-header-cell *matHeaderCellDef> Speed </th>
        <td mat-cell *matCellDef="let asset"> {{asset.speed}} </td>
      </ng-container>
      <!-- Date Column -->
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef> Date </th>
        <td mat-cell *matCellDef="let asset"> {{asset.date | date:'short'}} </td>
      </ng-container>
      <!-- Row Detail Toggle -->
      <ng-container matColumnDef="expand">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let asset">
          <button mat-icon-button (click)="toggleRow(asset)">
            <mat-icon>{{expandedAsset === asset ? 'expand_less' : 'expand_more'}}</mat-icon>
          </button>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="toggleRow(row)"></tr>
      <ng-container *ngFor="let row of filteredAssets">
        <tr *ngIf="expandedAsset === row" class="detail-row">
          <td colspan="5">
            <div class="asset-detail">
              <!-- Asset detail content here -->
              <strong>ID:</strong> {{row.id}}<br>
              <strong>Location:</strong> {{row.location}}<br>
              <strong>Speed:</strong> {{row.speed}}<br>
              <strong>Date:</strong> {{row.date | date:'full'}}<br>
            </div>
          </td>
        </tr>
      </ng-container>
    </table>
  </cdk-virtual-scroll-viewport>
</div>
